import streamlit as st
import random
import datetime
import os
import base64

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏û‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
def set_bg_hack(main_bg):
    if not os.path.exists(main_bg):
        return
    with open(main_bg, "rb") as f:
        data = f.read()
    b64_encoded = base64.b64encode(data).decode()
    st.markdown(
         f"""
         <style>
         .stApp {{
             background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(data:image/jpg;base64,{b64_encoded});
             background-size: cover;
             background-position: center;
             color: white;
         }}
         .stMarkdown p, .stSubheader, .stTitle {{
             text-shadow: 2px 2px 4px #000000;
             color: white !important;
         }}
         div[data-testid="stMetricValue"] {{
             color: #FFD700 !important; /* ‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏°‡∏á‡∏Ñ‡∏• */
             font-weight: bold;
         }}
         </style>
         """,
         unsafe_allow_html=True
     )

set_bg_hack('bg_yipsy.jpg') 

# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏≤‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Ç‡∏•‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
st.title("‚òÄÔ∏è Lucky 246: Solar Oracle")
st.subheader("‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡∏∞‡∏ï‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏´‡πà‡∏á‡πÑ‡∏û‡πà‡πÅ‡∏™‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå")

name = st.text_input("‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô)")
birthday = st.date_input("‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î", min_value=datetime.date(1950, 1, 1))

# ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏û‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ (‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏≠‡∏≠‡∏Å‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß)
fortune_texts = [
    "‚ú® [The Sun] : ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏≤‡∏ñ‡∏∂‡∏á ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏∑‡∏î‡∏°‡∏ô‡∏à‡∏∞‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏™‡∏ß ‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†‡∏Å‡πâ‡∏≠‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏à‡∏∞‡∏°‡∏≤‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß",
    "‚ú® [Ace of Pentacles] : ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÑ‡∏î‡πâ‡∏•‡∏≤‡∏†‡∏•‡∏≠‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏ß‡∏±‡∏ô",
    "‚ú® [The Chariot] : ‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô! ‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤ ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏à‡∏∞‡∏û‡πà‡∏≤‡∏¢‡πÅ‡∏û‡πâ‡πÑ‡∏õ‡πÄ‡∏≠‡∏á",
    "‚ú® [10 of Cups] : ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏•‡πâ‡∏ô‡∏õ‡∏£‡∏µ‡πà‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å‡∏à‡∏∞‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†‡∏°‡∏≤‡πÉ‡∏´‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà/‡∏á‡∏≤‡∏ô‡∏°‡∏á‡∏Ñ‡∏•",
    "‚ú® [Wheel of Fortune] : ‡∏Å‡∏á‡∏•‡πâ‡∏≠‡πÅ‡∏´‡πà‡∏á‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏¢‡∏¥‡∏ö‡∏à‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≠‡∏á‡πÑ‡∏õ‡∏´‡∏°‡∏î",
    "‚ú® [The Star] : ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏à‡πá‡∏ö‡∏õ‡πà‡∏ß‡∏¢‡∏à‡∏∞‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ñ‡∏≠‡∏¢‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå‡∏Ñ‡πâ‡∏≥‡∏ä‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏°‡πà‡∏´‡πà‡∏≤‡∏á",
    "‚ú® [The Magician] : ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡πÄ‡∏ï‡πá‡∏°‡πÄ‡∏õ‡∏µ‡πà‡∏¢‡∏° ‡∏ó‡πà‡∏≤‡∏ô‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏Ç‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏´‡∏ß‡∏û‡∏£‡∏¥‡∏ö ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏°‡∏µ‡πÇ‡∏ä‡∏Ñ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏à‡∏≤"
]

# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°
if st.button("üîÆ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏û‡πà‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤"):
    if not name or " " not in name or len(name) < 5:
        st.error("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥")
    else:
        random.seed(name + str(birthday) + str(datetime.date.today()))
        selected_fortune = random.choice(fortune_texts)
        lucky_numbers = [random.randint(0, 9) for _ in range(3)]
        lucky_str = "".join(map(str, lucky_numbers))
        
        st.divider()
        st.balloons()
        
        st.markdown(f"### üìú ‡∏Ñ‡∏≥‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì {name}")
        st.info(selected_fortune)
        
        col1, col2 = st.columns(2)
        with col1:
            st.metric("‚ú® ‡πÄ‡∏•‡∏Ç‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ", lucky_str)
        with col2:
            st.metric("‚òÄÔ∏è ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†", f"{random.randint(85, 100)}%")

        st.divider()
        st.markdown("### üôè ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏π‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†")
        st.write("‡∏£‡πà‡∏ß‡∏°‡∏ö‡∏π‡∏ä‡∏≤‡∏Ñ‡∏£‡∏π 9 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏Ç‡∏±‡∏î")
        
        try:
            st.image("004999022551005_20260228_162145.jpeg", caption="‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏π‡πÉ‡∏´‡πâ ‡∏ô‡∏≤‡∏¢ ‡∏ö‡∏î‡∏¥‡∏ô‡∏ó‡∏£‡πå", width=300)
        except:
            st.warning("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û QR Code...")
